<mvc:View controllerName="ps.app.ui.view.Content" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:patient="ps.app.ui.lib" xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1">
    <ObjectHeader id="patientHeader" busy="{state>/busy/masterdata}" title="{/masterdata/title/0/text}" visible="{state>/showHeader}" attributes="{/masterdata/details}">
        <ObjectAttribute text="{text}"/>
    </ObjectHeader>
    <IconTabBar id="patientIconTabBar" class="sapUiResponsiveContentPadding" expandable="false" selectedKey="{parts: ['state>/tab', 'state>/tabs'], formatter: '.checkSelectedKey'}" select=".onDetailSelect">
        <items>
            <IconTabFilter key="timeline" text="{i18n>HPH_PAT_CONTENT_TIMELINE_TAB_TITLE}">
                <patient:OverviewToolbar class="sapTlOverviewToolbar sapUiSmallMarginBottom" busy="{state>/busy/interactions}" content="{path:'/lanes', templateShareable:true}">
                    <patient:OverviewButton color="{color}" icon="sap-icon://accept" pressed="{visible}" text="{title} ({tileCount})"/>
                </patient:OverviewToolbar>
                <FlexBox height="100%" alignItems="Center" justifyContent="Center" visible="{= ${state>/error/interactions/reason} !== '' }">
                    <items>
                        <core:Icon class="sapUiTinyMargin" src="sap-icon://error"/>
                        <Text width="100%" wrapping="true" text="{state>/error/interactions/reason}"/>
                    </items>
                </FlexBox>
                <patient:Timeline id="timeline" visible="{= ${state>/error/interactions/reason} === '' }" busy="{state>/busy/interactions}" dateOfBirth="{/masterdata/dob}" dateOfDeath="{/masterdata/dod}" dateRangeMax="{/timeline/max}" dateRangeMin="{/timeline/min}" lanes="{path: '/lanes', factory: '.createLane'}" showDatelessInteractions="{/timeline/showDatelessInteractions}"/>
            </IconTabFilter>
            <IconTabFilter key="overview" text="{i18n>HPH_PAT_CONTENT_OVERVIEW_TAB_TITLE}" visible="{state>/tabs/overview/visible}">
                <patient:OverviewToolbar class="sapTlOverviewToolbar" busy="{state>/busy/interactions}" content="{path:'/lanes', templateShareable:true}">
                    <patient:OverviewButton color="{color}" icon="sap-icon://accept" pressed="{initiallyFiltered}" text="{title} ({tileCount})" press=".filterOverviewInteractions" enabled="{=!!${tileCount}}"/>
                </patient:OverviewToolbar>
                <Panel id="overviewPanelUndated" class="sapUiResponsiveMargin sapTlOverviewPanelUndated" expandable="true" expanded="false" headerText="{parts: ['i18n>HPH_PAT_CONTENT_DATELESS_SECTION_HEADER_OVERVIEW', '/overviewInteractions/undated', '/lanes'], formatter: '.formatTextWithLengthPlaceholder'}" width="auto">
                    <List id="overviewListUndated" busy="{state>/busy/interactions}" noDataText="{i18n>HPH_PAT_CONTENT_OVERVIEW_NO_DATA_TEXT}" items="{path: '/overviewInteractions/undated', sorter: [{path: 'start', descending: true}], templateShareable:true}">
                        <patient:OverviewListItem color="{color}" end="{end}" groupName="{groupName}" name="{name}" start="{start}" annotations="{path: 'annotations', factory: '.createOverviewAnnotations'}" attributes="{attributes}"/>
                    </List>
                </Panel>
                <Panel id="overviewPanelDated" class="sapUiResponsiveMargin sapTlOverviewPanelDated" expandable="false" expanded="true" headerText="{parts: ['i18n>HPH_PAT_CONTENT_DATELESS_SECTION_HEADER_TIMELINE', '/overviewInteractions/dated', '/lanes'], formatter: '.formatTextWithLengthPlaceholder'}" width="auto">
                    <List id="overviewListDated" busy="{state>/busy/interactions}" noDataText="{i18n>HPH_PAT_CONTENT_OVERVIEW_NO_DATA_TEXT}" items="{path: '/overviewInteractions/dated', sorter: [{path: 'start', descending: true}], templateShareable:true}">
                        <patient:OverviewListItem color="{color}" end="{end}" groupName="{groupName}" name="{name}" start="{start}" annotations="{path: 'annotations', factory: '.createOverviewAnnotations'}" attributes="{attributes}"/>
                    </List>
                </Panel>
            </IconTabFilter>
        </items>
    </IconTabBar>
</mvc:View>
